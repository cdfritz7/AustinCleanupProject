(window.webpackJsonpaustincleanup=window.webpackJsonpaustincleanup||[]).push([[0],{123:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),o=a.n(r),i=(a(90),a(91),a(92),a(8)),l=a(9),c=a(11),d=a(10),u=a(12),h=a(22),p=a(26),m=(a(93),a(37)),v=a.n(m),g=a(44),E=a.n(g),f=a(6),b=a(162),w=a(158),C=(a(94),function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,null,[{key:"getAPIBase",value:function(){return"http://sojoin-api.us-east-2.elasticbeanstalk.com:8080/"}}]),e}()),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={search:"",latitude:"30.27",longitude:"-97.74",toMapPage:!1,isValidSearchStr:!1},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"isLocationValid",value:function(e){return!0}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log("Submitted");var a=this.state.search.split(" ").join("%20");fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a,".json?access_token=").concat("pk.eyJ1IjoiY2Rmcml0ejciLCJhIjoiY2sydzBmenM3MGF1djNrcWR3YzRmaGQ0aCJ9.y0TZwO3PN1sYjakT02t1fQ")).then(function(e){if(e.ok)return e.json();throw new Error("Error in searchpage.handleSubmit")}).then(function(e){var a=e.features[0].geometry.coordinates[1],n=e.features[0].geometry.coordinates[0];t.setState({toMapPage:!0,latitude:a,longitude:n})})}},{key:"handleChange",value:function(e){this.setState({search:e.target.value}),this.isLocationValid(e.target.value)&&this.setState({isValidSearchStr:!0})}},{key:"render",value:function(){if(console.log("test"),this.state.toMapPage){var e="/MapPage/?lat=".concat(this.state.latitude,"&lng=").concat(this.state.longitude);return s.a.createElement(p.a,{to:e})}return s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("div",{className:"centered titleText"},"Thatch",s.a.createElement(b.a,{onSubmit:this.handleSubmit},s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Control,{style:{width:"66vw",height:"6vh"},placeholder:"Search!",onChange:this.handleChange})),s.a.createElement(w.a,{variant:"primary",type:"submit"},"Go!"))))}}]),t}(n.Component),y=(a(99),a(159)),j=a(160),O=a(80),k=a(163),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isSignedUp:!1,isOrganizer:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleRemoval=a.handleRemoval.bind(Object(f.a)(a)),a.handleDelete=a.handleDelete.bind(Object(f.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(){var e=this;fetch(C.getAPIBase()+"austinCleanupAPI/addUserEvent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:this.props.userId,eventId:this.props.event.id.toString(),isOrganizer:"false"})}).then(function(e){if(!e.ok)throw new Error("Error in ViewEventComponent.js in handleSubmit()")}).then(function(){e.setState({isSignedUp:!0})})}},{key:"componentDidMount",value:function(){var e=this;this.props.isLoggedIn&&fetch(C.getAPIBase()+"austinCleanupAPI/isUserSignedUpForEvent?userId=".concat(this.props.userId,"&eventId=").concat(this.props.event.id)).then(function(e){if(e.ok)return e.json();throw new Error("Error in ViewEventComponent.js componentDidMount, Network response not okay")}).then(function(t){e.setState({isSignedUp:t.isSignedUp,isOrganizer:t.isOrganizer})})}},{key:"handleRemoval",value:function(){var e=this;this.props.isLoggedIn&&fetch(C.getAPIBase()+"austinCleanupAPI/deleteUserEvent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:this.props.userId.toString(),eventId:this.props.event.id.toString()})}).then(function(e){if(e.ok)return e.json();throw new Error("Error in ViewEventComponent.js, user event interaction not found in database")}).then(function(t){"undefined"!=typeof e.props.removeSignUp&&e.props.removeSignUp()})}},{key:"handleDelete",value:function(){var e=this;console.log(this.props.event.id.toString()),fetch(C.getAPIBase()+"austinCleanupAPI/absoluteDeleteEventById",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:this.props.event.id.toString()})}).then(function(e){if(!e.ok)throw new Error("Error in ViewEventComponent.js handleDelete, event not found in database")}).then(function(t){"undefined"!=typeof e.props.removeSignUp&&e.props.removeSignUp()})}},{key:"render",value:function(){var e,t,a=this;return this.state.isOrganizer||(e="True"===this.props.isLoggedIn?this.state.isSignedUp?this.props.removeSignUp?s.a.createElement(w.a,{variant:"warning",onClick:function(){return a.handleRemoval()}},"Remove Yourself"):s.a.createElement(w.a,null,"You're Already Signed Up!"):s.a.createElement(w.a,{onClick:function(){return a.handleSubmit()}},"Sign Up!"):s.a.createElement(w.a,{variant:"light"},s.a.createElement(h.b,{to:"/Profile"},"Sign In to Sign Up"))),"True"===this.props.isLoggedIn&&this.state.isOrganizer&&(t=s.a.createElement(w.a,{onClick:function(){return a.handleDelete()},variant:"danger"}," Delete Event ")),s.a.createElement("div",null,s.a.createElement("h1",null,this.props.event.name),s.a.createElement("h3",null,this.props.event.latitude),s.a.createElement("h3",null,this.props.event.longitude),e,t)}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={name:"",address:"",latitude:"",longitude:"",description:""},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleNameChange=a.handleNameChange.bind(Object(f.a)(a)),a.handleLatitudeChange=a.handleLatitudeChange.bind(Object(f.a)(a)),a.handleLongitudeChange=a.handleLongitudeChange.bind(Object(f.a)(a)),a.handleAddressChange=a.handleAddressChange.bind(Object(f.a)(a)),a.handleDescChange=a.handleDescChange.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this;fetch(C.getAPIBase()+"austinCleanupAPI/addEvent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:this.state.name,address:this.state.address,latitude:this.state.latitude,longitude:this.state.longitude,description:this.state.description})}).then(function(e){if(e.ok)return e.json();throw new Error("Error in AddEventComponent.js handleSubmit, Network response not okay")}).then(function(e){fetch(C.getAPIBase()+"austinCleanupAPI/addUserEvent",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:t.props.userId,eventId:e.EventId,isOrganizer:"True"})}).then(function(e){if(!e.ok)throw new Error("Error in AddEventComponent.js userevent post, Network response not okay");a.setState({name:"",address:"",latitude:"",longitude:"",description:""})})})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleDescChange",value:function(e){this.setState({description:e.target.value})}},{key:"handleAddressChange",value:function(e){this.setState({address:e.target.value})}},{key:"handleLatitudeChange",value:function(e){this.setState({latitude:e.target.value})}},{key:"handleLongitudeChange",value:function(e){this.setState({longitude:e.target.value})}},{key:"render",value:function(){return"True"===this.props.isLoggedIn?s.a.createElement("div",null,s.a.createElement(b.a,{onSubmit:this.handleSubmit},s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Name"),s.a.createElement(b.a.Control,{value:this.state.name,placeholder:"Enter Name of Event",onChange:this.handleNameChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Address"),s.a.createElement(b.a.Control,{value:this.state.address,placeholder:"Enter Address",onChange:this.handleAddressChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Latitude"),s.a.createElement(b.a.Control,{value:this.state.latitude,placeholder:"Enter Latitude",onChange:this.handleLatitudeChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Longitude"),s.a.createElement(b.a.Control,{value:this.state.longitude,placeholder:"Enter Longitude",onChange:this.handleLongitudeChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Description"),s.a.createElement(b.a.Control,{value:this.state.description,placeholder:"Enter Description",onChange:this.handleDescChange})),s.a.createElement(w.a,{variant:"primary",type:"submit"},"Submit"))):s.a.createElement(w.a,{variant:"light"},s.a.createElement(h.b,{to:"/Profile"},"Sign In to Create Events"))}}]),t}(n.Component),L=a(164),U=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(L.a.Item,{action:!0,key:this.props.my_event.id.toString(),eventKey:this.props.my_event.id.toString(),onClick:function(){e.props.onClick({showViewEventModal:!0,displayedEvent:e.props.my_event})},ref:this.props.myRef},s.a.createElement("h3",null,this.props.my_event.name)))}}]),t}(n.Component);U.defaultProps={myRef:void 0};var _=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.events.length;t++)0===this.props.eventRefs.length?e.push(s.a.createElement(U,{my_event:this.props.events[t],onClick:this.props.onClick})):e.push(s.a.createElement(U,{my_event:this.props.events[t],myRef:this.props.eventRefs[t],onClick:this.props.onClick}));return s.a.createElement("div",null,s.a.createElement(L.a,{style:{height:"85%",width:"100%",overflow:"scroll"}},e))}}]),t}(n.Component);_.defaultProps={events:[],eventRefs:[]};var A=_,M=a(33),x=a.n(M),T=a(81),N=a(82),B=a(58),R=a(165);x.a.accessToken="pk.eyJ1IjoiY2Rmcml0ejciLCJhIjoiY2sydzBmenM3MGF1djNrcWR3YzRmaGQ0aCJ9.y0TZwO3PN1sYjakT02t1fQ";var D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={lng:e.lng,lat:e.lat,zoom:10},a.componentDidMount=a.componentDidMount.bind(Object(f.a)(a)),a.markers=[],a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.lng,n=t.lat,s=t.zoom;console.log(this.props.events),console.log(this.props.testprop);var r=new x.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",center:[a,n],zoom:s});this.map=r,r.on("move",function(){var t=r.getCenter(),a=t.lng,n=t.lat;e.setState({lng:a.toFixed(4),lat:n.toFixed(4),zoom:r.getZoom().toFixed(2)}),void 0!==e.props.onMove&&e.props.onMove(n,a)}),r.addControl(new x.a.NavigationControl)}},{key:"render",value:function(){for(var e=this,t=this.state,a=(t.lng,t.lat,t.zoom,0);a<this.markers.length;a++)this.markers[a].remove();this.markers=[];var n=this.props.onClick,r=(this.props.onMouseIn,this.props.onMouseOut,function(){var t=e.props.events[a],r=e.props.eventRefs[a];o=s.a.createElement(R.a,{style:{width:"10rem",margin:"-5px"}},s.a.createElement(R.a.Header,null,t.name),s.a.createElement(R.a.Body,null,s.a.createElement(R.a.Text,null,t.description)));var l=new x.a.Popup({closeButton:!1,closeOnClick:!1}).setHTML(Object(B.renderToString)(o));(i=document.createElement("div")).innerHTML=Object(B.renderToString)(s.a.createElement(T.a,{icon:N.a,size:"3x",color:"#00B0B0"})),i.id="marker";var c=new x.a.Marker(i,{offset:[-25,-25]}).setLngLat([t.longitude,t.latitude]).setPopup(l).addTo(e.map);i.addEventListener("mouseenter",function(){r.current.scrollIntoView({behavior:"smooth",block:"start"}),l.setLngLat([t.longitude,t.latitude]).addTo(e.map)}),i.addEventListener("mouseleave",function(){l.remove()}),i.addEventListener("click",function(){n({showViewEventModal:!0,displayedEvent:t})}),e.markers.push(c)});for(a=0;a<this.props.events.length;a++){var o,i;r()}return s.a.createElement("div",{style:{position:"relative",top:0,bottom:0,width:"99%",height:"87vh",overflow:"hidden"},ref:function(t){return e.mapContainer=t}})}}]),t}(n.Component);D.defaultProps={lng:4,lat:34,zoom:10,onMove:void 0,events:[],eventRefs:[]};var z=D,V=(a(123),function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));var n,s,r=e.location.search;if(r){var o=r.slice(1).split("&");n=parseFloat(o[0].slice([4])),s=parseFloat(o[1].slice([4]))}else n=30.27,s=-97.74;return a.state={latitude:n,longitude:s,search_str:a.props.match.params.latlong,events:[],eventRefs:[],isLoggedIn:localStorage.getItem("isLoggedOn"),userId:localStorage.getItem("userId"),showAddEventModal:!1,showViewEventModal:!1},a.componentDidMount=a.componentDidMount.bind(Object(f.a)(a)),a.resetEvents=a.resetEvents.bind(Object(f.a)(a)),a.removeSignUp=a.removeSignUp.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"createEventRefs",value:function(e){var t=[];for(var a in e)t.push(s.a.createRef());return t}},{key:"resetEvents",value:function(e,t){var a=this;fetch(C.getAPIBase()+"/austinCleanupAPI/eventsByLatLong?lat=".concat(e,"&lng=").concat(t)).then(function(e){if(e.ok)return e.json();throw new Error("Error in MapPage.js resetEvents, Network response not okay")}).then(function(n){a.setState({events:n,eventRefs:a.createEventRefs(n),latitude:e,longitude:t})})}},{key:"componentDidMount",value:function(){var e=this;fetch(C.getAPIBase()+"austinCleanupAPI/eventsByLatLong?lat=".concat(this.state.latitude.toString(),"&lng=").concat(this.state.longitude.toString())).then(function(e){if(e.ok)return e.json();throw new Error("Error in MapPage.js componentDidMount, Network response not okay")}).then(function(t){e.setState({events:t,eventRefs:e.createEventRefs(t)})})}},{key:"removeSignUp",value:function(){this.resetEvents(this.state.latitude,this.state.longitude),this.setState({showViewEventModal:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(y.a,{style:{height:"100%",width:"100%",maxWidth:"100%",margin:"0px",padding:"0px"}},s.a.createElement(j.a,{style:{padding:"30px"}},s.a.createElement(O.a,{xs:3,style:{textAlign:"center",padding:"0px",paddingLeft:"15px"}},s.a.createElement(A,{events:this.state.events,eventRefs:this.state.eventRefs,onClick:function(t,a){e.setState(t,a)}}),s.a.createElement(w.a,{variant:"primary",style:{margin:"10px"},onClick:function(){e.setState({showAddEventModal:!0})}},"Add Event")),s.a.createElement(O.a,{xs:9,style:{padding:"0px"}},s.a.createElement(z,{lat:this.state.latitude,lng:this.state.longitude,onMove:this.resetEvents,events:this.state.events,eventRefs:this.state.eventRefs,testprop:1,onClick:function(t,a){e.setState(t,a)},onMouseIn:function(t){e.setState(t)},onMouseOut:function(t){e.setState(t)}}))),s.a.createElement(j.a,{className:"justify-content-center"},s.a.createElement(O.a,{xs:12},s.a.createElement(k.a,{show:this.state.showAddEventModal,onHide:function(){e.setState({showAddEventModal:!1}),e.resetEvents(e.state.latitude,e.state.longitude)}},s.a.createElement(k.a.Header,{closeButton:!0},s.a.createElement(k.a.Title,null,"Add Event")),s.a.createElement(k.a.Body,null,s.a.createElement(P,{isLoggedIn:this.state.isLoggedIn,userId:this.state.userId}))),s.a.createElement(k.a,{show:this.state.showViewEventModal,onHide:function(){e.setState({showViewEventModal:!1})}},s.a.createElement(k.a.Header,{closeButton:!0}),s.a.createElement(k.a.Body,null,s.a.createElement(I,{event:this.state.displayedEvent,isLoggedIn:this.state.isLoggedIn,userId:this.state.userId,removeSignUp:this.removeSignUp})))))))}}]),t}(n.Component)),G=a(59),J=a.n(G),H=a(84),F=a(161),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={email:"",username:"",password:"",cpassword:"",wrong_password:!1,user_exists:!1,weak_password:!1,invalid_username:!1,invalid_email:!1,addition_success:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(f.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(f.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(f.a)(a)),a.handleCPasswordChange=a.handleCPasswordChange.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch(C.getAPIBase()+"austinCleanupAPI/addUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,username:this.state.username,password:this.state.password,cpassword:this.state.cpassword})}).then(function(e){if(e.ok)return console.log(e),e.json();throw new Error("Error in Add Account Component, response not ok")}).then(function(e){"User already exists"===e.response?t.setState({user_exists:!0,weak_password:!1,wrong_password:!1,invalid_username:!1,invalid_email:!1,addition_success:!1}):"Passwords do not match"===e.response?t.setState({wrong_password:!0,weak_password:!1,user_exists:!1,invalid_username:!1,invalid_email:!1,addition_success:!1}):"Password not strong enough"===e.response?t.setState({weak_password:!0,wrong_password:!1,user_exists:!1,invalid_username:!1,invalid_email:!1,addition_success:!1}):"Invalid username"==e.response?t.setState({invalid_username:!0,weak_password:!1,wrong_password:!1,user_exists:!1,invalid_email:!1,addition_success:!1}):"Invalid email"==e.response?t.setState({invalid_email:!0,weak_password:!1,wrong_password:!1,user_exists:!1,invalid_username:!1,addition_success:!1}):t.setState({weak_password:!1,wrong_password:!1,user_exists:!1,invalid_username:!1,invalid_email:!1,addition_success:!0,email:"",username:"",password:"",cpassword:""})})}},{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleCPasswordChange",value:function(e){this.setState({cpassword:e.target.value})}},{key:"render",value:function(){var e;return this.state.wrong_password?e=s.a.createElement(F.a,{variant:"warning"},"Passwords do not match"):this.state.weak_password?e=s.a.createElement(F.a,{variant:"warning"},"Password is too weak! Passwords must be longer than 8 digits, and have at least one number, one uppercase letter, and one symbol."):this.state.user_exists?e=s.a.createElement(F.a,{variant:"warning"},"User already exists"):this.state.invalid_username?e=s.a.createElement(F.a,{variant:"warning"},"Username is invalid! Usernames must be longer than 3 characters."):this.state.invalid_email?e=s.a.createElement(F.a,{variant:"warning"},"Email is invalid!"):this.state.addition_success&&(e=s.a.createElement(F.a,{variant:"success"},"User Added!")),s.a.createElement("div",null,e,s.a.createElement(b.a,{onSubmit:this.handleSubmit},s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Email"),s.a.createElement(b.a.Control,{value:this.state.email,placeholder:"Enter Your Email",onChange:this.handleEmailChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Username"),s.a.createElement(b.a.Control,{value:this.state.username,placeholder:"New Username",onChange:this.handleUsernameChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Password"),s.a.createElement(b.a.Control,{type:"password",value:this.state.password,placeholder:"New Password",onChange:this.handlePasswordChange}),s.a.createElement(b.a.Text,{className:"text-muted"},"Passwords must be longer than 8 digits, and have at least one number, one uppercase letter, and one symbol.")),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Confirm Password"),s.a.createElement(b.a.Control,{type:"password",value:this.state.cpassword,placeholder:"Confirm Password",onChange:this.handleCPasswordChange})),s.a.createElement(w.a,{variant:"primary",type:"submit"},"Submit")))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={showCreateAccountModal:!1},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(f.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleSubmit",value:function(e){this.props.onLoginSubmit(e)}},{key:"handleUsernameChange",value:function(e){this.props.handleUsernameChange(e.target.value)}},{key:"handlePasswordChange",value:function(e){this.props.handlePasswordChange(e.target.value)}},{key:"render",value:function(){var e=this;return console.log("login component rendered"),s.a.createElement("div",null,s.a.createElement(y.a,null,s.a.createElement(j.a,null,s.a.createElement(O.a,{xs:12},s.a.createElement(b.a,{onSubmit:this.handleSubmit},s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Username"),s.a.createElement(b.a.Control,{value:this.props.username,onChange:this.handleUsernameChange})),s.a.createElement(b.a.Group,null,s.a.createElement(b.a.Label,null,"Password"),s.a.createElement(b.a.Control,{type:"password",value:this.props.password,onChange:this.handlePasswordChange})),s.a.createElement(w.a,{variant:"primary",type:"submit"},"Log in")))),s.a.createElement(j.a,null,s.a.createElement(O.a,{xs:12},s.a.createElement(w.a,{variant:"primary",onClick:function(){e.setState({showCreateAccountModal:!0})}},"Create New Account"),s.a.createElement(k.a,{show:this.state.showCreateAccountModal,onHide:function(){e.setState({showCreateAccountModal:!1})}},s.a.createElement(k.a.Header,{closeButton:!0},s.a.createElement(k.a.Title,null,"New Account")),s.a.createElement(k.a.Body,null,s.a.createElement(Y,null)))))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={showViewEventModal:!1},a.removeSignUp=a.removeSignUp.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"removeSignUp",value:function(){this.setState({showViewEventModal:!1}),this.props.resetEvents()}},{key:"render",value:function(){var e=this;return s.a.createElement(y.a,null,s.a.createElement(j.a,null,s.a.createElement(O.a,{xs:4},s.a.createElement("h4",null," Profile Information ")),s.a.createElement(O.a,{xs:4},s.a.createElement("h4",null," Events I'm Signed Up For "),s.a.createElement(A,{events:this.props.signedUpEvents,onClick:function(t,a){e.setState(t,a)}})),s.a.createElement(O.a,{xs:4},s.a.createElement("h4",null," My Organized Events "),s.a.createElement(A,{events:this.props.organizedEvents,onClick:function(t,a){e.setState(t,a)}}))),s.a.createElement(j.a,null,s.a.createElement(O.a,{xs:12},s.a.createElement(w.a,{variant:"primary",onClick:function(){e.props.logOff()}},"Log Out"))),s.a.createElement(k.a,{show:this.state.showViewEventModal,onHide:function(){e.setState({showViewEventModal:!1})}},s.a.createElement(k.a.Header,{closeButton:!0}),s.a.createElement(k.a.Body,null,s.a.createElement(I,{event:this.state.displayedEvent,isLoggedIn:this.props.isLoggedIn,userId:this.props.userId,removeSignUp:this.removeSignUp}))))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={login_response:localStorage.getItem("isLoggedOn"),userId:localStorage.getItem("userId"),username:"",password:"",organizedEvents:[],signedUpEvents:[]},a.handleLogonSubmit=a.handleLogonSubmit.bind(Object(f.a)(a)),a.handleLogoffSubmit=a.handleLogoffSubmit.bind(Object(f.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(f.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(f.a)(a)),a.resetEvents=a.resetEvents.bind(Object(f.a)(a)),a.resetEvents(),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleLogoffSubmit",value:function(){this.setState({login_response:"False",username:"",userId:void 0,password:"",organizedEvents:[],signedUpEvents:[]}),localStorage.setItem("isLoggedOn","False"),localStorage.setItem("userId",void 0)}},{key:"handleLogonSubmit",value:function(){var e=Object(H.a)(J.a.mark(function e(t){var a,n;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch(C.getAPIBase()+"austinCleanupAPI/checkIsUser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})});case 3:return a=e.sent,e.next=6,a.json();case 6:"True"===(n=e.sent).IsValid&&(this.resetEvents(n.UserId),this.setState({login_response:n.IsValid,userId:n.UserId}),localStorage.setItem("isLoggedOn",n.IsValid),localStorage.setItem("userId",n.UserId));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"resetEvents",value:function(e){var t=this;"undefined"===typeof e&&(e=localStorage.getItem("userId")),fetch(C.getAPIBase()+"austinCleanupAPI/detailedEventsByUserId?id=".concat(e)).then(function(e){if(e.ok)return e.json();throw new Error("Error in ProfilePage.js when calling signedUpEventsByUserId")}).then(function(e){t.setState({signedUpEvents:e.signedUpEvents,organizedEvents:e.organizedEvents})})}},{key:"handleUsernameChange",value:function(e){this.setState({username:e})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e})}},{key:"render",value:function(){var e;return e="True"===this.state.login_response?s.a.createElement(W,{logOff:this.handleLogoffSubmit,signedUpEvents:this.state.signedUpEvents,organizedEvents:this.state.organizedEvents,isLoggedIn:this.state.login_response,userId:this.state.userId,resetEvents:this.resetEvents}):s.a.createElement(Q,{onLoginSubmit:this.handleLogonSubmit,handleUsernameChange:this.handleUsernameChange,handlePasswordChange:this.handlePasswordChange,username:this.state.username,password:this.state.password}),s.a.createElement(y.a,null,s.a.createElement(j.a,null,s.a.createElement(O.a,{xs:12},e)))}}]),t}(n.Component),q=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,null,s.a.createElement(v.a,{bg:"light",expand:"lg",sticky:"top"},s.a.createElement(v.a.Brand,null,s.a.createElement(h.c,{className:"",exact:!0,to:"/"},"Home")),s.a.createElement(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),s.a.createElement(v.a.Collapse,{id:"basic-navbar-nav"},s.a.createElement(E.a,{className:"mr-auto"},s.a.createElement(E.a.Link,null,s.a.createElement(h.c,{className:"",to:"/MapPage"},"Explore")),s.a.createElement(E.a.Link,null,s.a.createElement(h.c,{className:"",to:"/Profile"},"Profile"))))),s.a.createElement(p.b,{exact:!0,path:"/",component:S}),s.a.createElement(p.b,{path:"/MapPage",component:V}),s.a.createElement(p.b,{path:"/Profile",component:Z}),s.a.createElement(p.b,{path:"/MapPage/:qry",component:V}))}}]),t}(n.Component);o.a.render(s.a.createElement(q,null),document.getElementById("root"))},85:function(e,t,a){e.exports=a(156)},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.8683338e.chunk.js.map