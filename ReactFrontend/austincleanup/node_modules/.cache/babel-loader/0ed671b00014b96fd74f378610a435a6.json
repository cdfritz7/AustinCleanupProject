{"ast":null,"code":"var _jsxFileName = \"/home/fritz/Projects/austincleanup/ReactFrontend/austincleanup/src/MapBoxMapComponent.js\";\nimport React, { Component } from 'react';\nimport mapboxgl from 'mapbox-gl'; //https://blog.mapbox.com/mapbox-gl-js-react-764da6cc074a\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiY2Rmcml0ejciLCJhIjoiY2sydzBmenM3MGF1djNrcWR3YzRmaGQ0aCJ9.y0TZwO3PN1sYjakT02t1fQ';\n\nclass MapBoxMapComponent extends Component {\n  loadStyle(url) {\n    let index = window.document.getElementsByTagName(\"link\")[0];\n    let link = window.document.createElement(\"link\");\n    link.href = url;\n    link.rel = 'stylesheet';\n    index.parentNode.insertBefore(link, index);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      lng: props.lng,\n      lat: props.lat,\n      zoom: 10\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.markers = [];\n  }\n\n  componentDidMount() {\n    loadStyle(\"https://api.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.css\");\n    const _this$state = this.state,\n          lng = _this$state.lng,\n          lat = _this$state.lat,\n          zoom = _this$state.zoom;\n    console.log(this.props.events);\n    console.log(this.props.testprop);\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mapbox/streets-v9',\n      center: [lng, lat],\n      zoom\n    });\n    this.map = map; //changes latitude longitude state on move\n    //and calls onMove method from parent component => used to update events in\n    //parent\n\n    map.on('move', () => {\n      const _map$getCenter = map.getCenter(),\n            lng = _map$getCenter.lng,\n            lat = _map$getCenter.lat;\n\n      this.setState({\n        lng: lng.toFixed(4),\n        lat: lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2)\n      });\n\n      if (this.props.onMove !== undefined) {\n        this.props.onMove(lat, lng);\n      }\n      /*\n      this.props.events.forEach(function(event){\n        console.log(event.name);\n        const tooltip = new mapboxgl.Marker(<h1>e</h1>, {\n          offset: [-120, 0]\n        }).setLngLat([event.latitude, event.longitude]).addTo(map);\n      });\n      */\n\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          lng = _this$state2.lng,\n          lat = _this$state2.lat,\n          zoom = _this$state2.zoom;\n\n    for (var i = 0; i < this.markers.length; i++) {\n      this.markers[i].remove();\n    }\n\n    this.markers = [];\n\n    for (var i = 0; i < this.props.events.length; i++) {\n      let evnt = this.props.events[i];\n      let marker = new mapboxgl.Marker().setLngLat([evnt.longitude, evnt.latitude]).addTo(this.map);\n      this.markers.push(marker);\n    }\n\n    const style = {\n      overflow: 'hidden'\n    };\n    return React.createElement(\"div\", {\n      style: style,\n      ref: el => this.mapContainer = el,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    });\n  }\n\n}\n\nMapBoxMapComponent.defaultProps = {\n  lng: 4,\n  lat: 34,\n  zoom: 10,\n  onMove: undefined,\n  events: []\n};\nexport default MapBoxMapComponent;","map":{"version":3,"sources":["/home/fritz/Projects/austincleanup/ReactFrontend/austincleanup/src/MapBoxMapComponent.js"],"names":["React","Component","mapboxgl","accessToken","MapBoxMapComponent","loadStyle","url","index","window","document","getElementsByTagName","link","createElement","href","rel","parentNode","insertBefore","constructor","props","state","lng","lat","zoom","componentDidMount","bind","markers","console","log","events","testprop","map","Map","container","mapContainer","style","center","on","getCenter","setState","toFixed","getZoom","onMove","undefined","render","i","length","remove","evnt","marker","Marker","setLngLat","longitude","latitude","addTo","push","overflow","el","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport mapboxgl from 'mapbox-gl';\n\n//https://blog.mapbox.com/mapbox-gl-js-react-764da6cc074a\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiY2Rmcml0ejciLCJhIjoiY2sydzBmenM3MGF1djNrcWR3YzRmaGQ0aCJ9.y0TZwO3PN1sYjakT02t1fQ';\n\nclass MapBoxMapComponent extends Component {\n\n  static defaultProps = {\n    lng: 4,\n    lat: 34,\n    zoom: 10,\n    onMove: undefined,\n    events: []\n  }\n\n  loadStyle(url) {\n    let index  = window.document.getElementsByTagName(\"link\")[0];\n    let link = window.document.createElement(\"link\");\n    link.href = url;\n    link.rel = 'stylesheet';\n    index.parentNode.insertBefore(link, index);\n  }\n\n  constructor(props){\n    super(props);\n\n    this.state = {\n      lng: props.lng,\n      lat: props.lat,\n      zoom: 10\n    }\n\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.markers = [];\n\n  }\n\n  componentDidMount() {\n    loadStyle(\"https://api.mapbox.com/mapbox-gl-js/v1.3.0/mapbox-gl.css\");\n\n    const {lng, lat, zoom} = this.state;\n\n    console.log(this.props.events);\n    console.log(this.props.testprop);\n\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/mapbox/streets-v9',\n      center: [lng, lat],\n      zoom\n    });\n\n    this.map = map;\n\n    //changes latitude longitude state on move\n    //and calls onMove method from parent component => used to update events in\n    //parent\n    map.on('move', ()=> {\n      const {lng, lat} = map.getCenter();\n\n      this.setState({\n        lng: lng.toFixed(4),\n        lat: lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2)\n      });\n\n      if(this.props.onMove !== undefined){\n        this.props.onMove(lat, lng);\n    }\n\n      /*\n      this.props.events.forEach(function(event){\n        console.log(event.name);\n        const tooltip = new mapboxgl.Marker(<h1>e</h1>, {\n          offset: [-120, 0]\n        }).setLngLat([event.latitude, event.longitude]).addTo(map);\n      });\n      */\n\n    });\n  }\n\n  render() {\n    const {lng, lat, zoom} = this.state;\n\n    for(var i = 0; i<this.markers.length; i++){\n      this.markers[i].remove();\n    }\n\n    this.markers = [];\n\n    for(var i = 0; i<this.props.events.length; i++){\n      let evnt = this.props.events[i];\n      let marker = new mapboxgl.Marker()\n        .setLngLat([evnt.longitude, evnt.latitude])\n        .addTo(this.map);\n      this.markers.push(marker);\n    }\n\n    const style = {\n      overflow: 'hidden'\n    };\n\n    return <div style={style} ref={el => this.mapContainer = el} />;\n  }\n}\n\nexport default MapBoxMapComponent;\n"]},"metadata":{},"sourceType":"module"}